{% extends "base.html" %}

{% block title %}
    Pagamento
{% endblock %}

{% block content %}
<div class="pagina-pagamento">
    <h2>Finalize seu Pagamento</h2>

    <div class="resumo-pagamento">
        <h3>Resumo da sua Reserva</h3>
        <div class="resumo-item">
            {% if reserva.carro_foto %}
                <img src="{{ url_for('static', filename='img/' + reserva.carro_foto) }}" 
                     alt="{{ reserva.carro_nome }}" class="img-tooltip" 
                     data-desc="Imagem do veículo {{ reserva.carro_nome }}">
            {% endif %}

            <div>
                <strong>Veículo:</strong> {{ reserva.carro_nome }}<br>
                <strong>Período:</strong> {{ reserva.dias }} dias (de {{ reserva.data_inicio }} até {{ reserva.data_fim }})
            </div>
        </div>
        <div class="resumo-total">
            Total a Pagar:
            <span>R$ {{ "%.2f"|format(reserva.preco_total) }}</span>
        </div>
    </div>

    <hr>

    <p class="info-cartao">
        Preencha os dados do seu cartão de crédito com segurança.
    </p>

    <form class="form-pagamento" action="{{ url_for('processar_pagamento') }}" method="POST">
        <label for="nome">Nome no Cartão:</label>
        <input type="text" id="nome" name="nome_cartao" placeholder="Digite o nome impresso no cartão" required>

        <label for="numero">Número do Cartão (16 dígitos, sem espaço):</label>
        <input type="text" id="numero" name="numero_cartao" 
               placeholder="0000000000000000" 
               pattern="[0-9]{16}" maxlength="16" 
               title="Digite os 16 números do seu cartão, sem espaços" required>

        <div class="form-linha">
            <div class="form-grupo">
                <label for="validade">Validade (MM/AA):</label>
                <input type="text" id="validade" name="validade_cartao" 
                       placeholder="MM/AA" 
                       pattern="[0-9]{2}/[0-9]{2}" 
                       title="Formato MM/AA" required>
            </div>
            <div class="form-grupo">
                <label for="cvv">CVV (3 ou 4 dígitos):</label>
                <input type="text" id="cvv" name="cvv_cartao" 
                       placeholder="123" 
                       pattern="[0-9]{3,4}" maxlength="4" 
                       title="Digite os 3 ou 4 números de segurança" required>
            </div>
        </div>

        <button type="submit" class="btn-confirmar">Confirmar Pagamento</button>
    </form>
</div>
{% endblock %}
